---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Contact Us">
  <h1 style="text-align: center;">Contact Us</h1>
  <p style="text-align: center;">We’d love to hear from you! Please fill out the form below and we’ll be in touch.</p>

  <div class="form-container">
    <form id="contact-form">
      <label for="name">Name:</label><br />
      <input type="text" id="name" name="name" required /><br /><br />

      <label for="email">Email:</label><br />
      <input type="email" id="email" name="email" required /><br /><br />

      <label for="message">Message:</label><br />
      <textarea id="message" name="message" rows="5" required></textarea><br /><br />

      <!-- spam honeypot -->
      <input type="text" name="_honey" style="display:none" tabindex="-1" autocomplete="off" />

      <!-- optional subject -->
      <input type="hidden" name="_subject" value="New message from ARAI Contact Form" />

      <button type="submit" id="submit-btn">Send Message</button>
    </form>
  </div>

  <script type="module">
    const form = document.getElementById('contact-form');
    const btn = document.getElementById('submit-btn');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      btn.disabled = true;

      try {
        const res = await fetch('https://formspree.io/f/mvgqvwrr', {
          method: 'POST',
          headers: { 'Accept': 'application/json' },
          body: new FormData(form)
        });

        if (res.ok) {
          form.reset();
          window.location.href = '/thank-you';
        } else {
          alert('Oops, something went wrong. Please try again.');
        }
      } catch {
        alert('Network error. Please try again.');
      } finally {
        btn.disabled = false;
      }
    });
  </script>

  <style>
    .form-container { max-width: 640px; margin: 1rem auto; padding: 1rem; }
    label { display: inline-block; margin-top: .5rem; }
    input, textarea { width: 100%; box-sizing: border-box; padding: .6rem; }
    button { padding: .6rem 1rem; cursor: pointer; }
  </style>
</Layout>

